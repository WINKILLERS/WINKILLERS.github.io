!function(){const e={orderBy:"startTime",showLocation:!1,offsetMax:72,offsetMin:4,showDeleted:!1,singleEvents:!0,maxResults:250},t=(Object.assign(e,CONFIG.calendar),new Date);var n=new Date,s=new Date;n.setHours(t.getHours()+e.offsetMax),s.setHours(t.getHours()-e.offsetMin),n={key:e.api_key,orderBy:e.orderBy,timeMax:n.toISOString(),timeMin:s.toISOString(),showDeleted:e.showDeleted,singleEvents:e.singleEvents,maxResults:e.maxResults};const a=new URL(`https://www.googleapis.com/calendar/v3/calendars/${e.calendar_id}/events`);function o(){const n=document.querySelector(".event-list");n&&fetch(a.href).then((e=>e.json())).then((s=>{if(0===s.items.length)n.innerHTML="<hr>";else{n.innerHTML="";let a=0;const o=6e4*(new Date).getTimezoneOffset();s.items.forEach((s=>{var r=new Date(s.start.dateTime||new Date(s.start.date).getTime()+o),i=new Date(s.end.dateTime||new Date(s.end.date).getTime()+o);let c="now";i<t?c="past":r>t&&(c="future"),"future"===c&&a<t&&n.insertAdjacentHTML("beforeend","<hr>"),n.insertAdjacentHTML("beforeend",function(n,s,a,o){var r,i,c,d,l={weekday:"short",hour:"2-digit",minute:"2-digit"},u="now"===n?"NOW":(r=t,c=30*(h=24*(u=36e5)),d=365*h,i=0<(r-=i=a)?" ago":" later",(r=Math.abs(r))<u?Math.round(r/6e4)+" minutes"+i:r<h?Math.round(r/u)+" hours"+i:r<c?"about "+Math.round(r/h)+" days"+i:r<d?"about "+Math.round(r/c)+" months"+i:"about "+Math.round(r/d)+" years"+i),h=a.toLocaleTimeString([],l)+" - "+o.toLocaleTimeString([],l);let m="",v=(e.showLocation&&s.location&&(m=`<span class="event-location event-details">${s.location}</span>`),"");return s.description&&(v=`<span class="event-description event-details">${s.description}</span>`),`<section class="event event-${n}">\n        <h2 class="event-summary">\n          ${s.summary}\n          <span class="event-relative-time">${u}</span>\n        </h2>\n        ${m}\n        <span class="event-duration event-details">${h}</span>\n        ${v}\n      </section>`}(c,s,r,i)),a=i}))}}))}Object.entries(n).forEach((e=>a.searchParams.append(...e))),o();const r=setInterval(o,6e4);document.addEventListener("pjax:send",(()=>{clearInterval(r)}))}();